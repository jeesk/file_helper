{"version":3,"sources":["render.js"],"names":["TipsType","tipsNormal","tipsPrimary","tipsSuccess","tipsInfo","tipsWarning","tipsDanger","TitleType","admin","owner","beforeRenderingHTML","data","chatboxClass","length","htmlStr","chatBox","document","querySelector","i","isRender","messageType","indexOf","renderTipHtml","html","renderMessageHtml","insertAdjacentHTML","setTimeout","scrollHeight","clientHeight","scrollTop","console","log","localStorage","setItem","JSON","stringify","concat","position","diamond","headIcon","renderTitleHtml","htitle","htitleType","escapeHtml","name","content","css","unsafe","replace","c","charCodeAt","slice"],"mappings":";;;;GAAA,aAAA,IAAMA,SAAW,CACbC,WAAY,OACZC,YAAa,eACbC,YAAa,eACbC,SAAU,YACVC,YAAa,eACbC,WAAY,eAEVC,UAAY,CACdC,MAAO,QACPC,MAAO,SAGX,SAASC,oBAAoBC,EAAMC,GAC/B,GAAkB,GAAfD,EAAKE,OAAR,CAKA,IAFA,IAAIC,EAAU,GACVC,EAAUC,SAASC,cAAcL,GAC5BM,EAAI,EAAGA,EAAIP,EAAKE,OAAQK,IACzBP,EAAKO,GAAGC,YAGiC,IAAzCR,EAAKO,GAAGE,YAAYC,QAAQ,QAC5BP,GAAWQ,cAAcX,EAAKO,GAAGK,KAAMvB,SAASW,EAAKO,GAAGE,cAAgB,QAExEN,GAAWU,kBAAkBb,EAAKO,IAEtCP,EAAKO,GAAGC,UAAW,GAGvBJ,EAAQU,mBAAmB,YAAaX,GACxCY,YAAW,WACHX,EAAQY,aAAeZ,EAAQa,eAC/Bb,EAAQc,UAAYd,EAAQY,aAC5BZ,EAAU,GACVD,EAAU,GAElB,GAAG,KACHgB,QAAQC,IAAI,MACZC,aAAaC,QAAQ,QAASC,KAAKC,UAAUxB,GAxB7C,CAyBJ,CAEA,SAASa,kBAAkBb,GACvB,MAAA,gBAAAyB,OAAuBzB,EAAK0B,SAAQ,0CAAAD,OACTzB,EAAK2B,QAAU,GAAK,SAAQ,WAAAF,OAAUzB,EAAK4B,SAAQ,4GAAAH,OAEpEI,gBAAgB7B,EAAK8B,OAAQlC,UAAUI,EAAK+B,aAAe,IAAG,wBAAAN,OACxDO,WAAWhC,EAAKiC,OAAS,SAAQ,4DAAAR,OAEA,QAArBzB,EAAKS,YAAwBT,EAAKY,KAAOoB,WAAWhC,EAAKY,MAAK,sBAE9F,CAEA,SAASiB,gBAAgBK,EAASC,GAC9B,OAAKD,EACL,uBAAAT,OAA8BU,EAAG,iCAAAV,OAAgCS,EAAO,WADnD,EAEzB,CAEA,SAASvB,cAAcuB,EAASC,GAC5B,OAAKD,EACL,kCAAAT,OAAyCU,EAAG,mCAAAV,OAAkCO,WAAWE,GAAQ,iBAD5E,EAEzB,CAIA,SAASF,WAAWI,GAChB,OAAOA,aAAM,EAANA,EAAQC,QACX,2DACA,SAAAC,GAAC,MAAI,MAAQ,MAAQA,EAAEC,WAAW,IAAIC,OAAO,GAAK,GAAG,GAE7D","file":"../litewebchat_render.min.js","sourcesContent":["const TipsType = {\n    tipsNormal: 'tips',\n    tipsPrimary: 'tips-primary',\n    tipsSuccess: 'tips-success',\n    tipsInfo: 'tips-info',\n    tipsWarning: 'tips-warning',\n    tipsDanger: 'tips-danger',\n};\nconst TitleType = {\n    admin: 'admin',\n    owner: 'owner',\n};\n\nfunction beforeRenderingHTML(data, chatboxClass) {\n    if(data.length == 0){\n        return\n    }\n    let htmlStr = '';\n    let chatBox = document.querySelector(chatboxClass);\n    for (let i = 0; i < data.length; i++) {\n        if (data[i].isRender) {\n            continue;\n        }\n        if (data[i].messageType.indexOf('tips') !== -1) {\n            htmlStr += renderTipHtml(data[i].html, TipsType[data[i].messageType] || 'tips');\n        } else {\n            htmlStr += renderMessageHtml(data[i]);\n        }\n        data[i].isRender = true;\n    }\n\n    chatBox.insertAdjacentHTML('beforeend', htmlStr);\n    setTimeout(() => {\n        if (chatBox.scrollHeight > chatBox.clientHeight) {\n            chatBox.scrollTop = chatBox.scrollHeight;\n            chatBox = '';\n            htmlStr = '';\n        }\n    }, 300);\n    console.log(\"你好\");\n    localStorage.setItem(\"htmls\", JSON.stringify(data))\n}\n\nfunction renderMessageHtml(data) {\n    return `<div class=\"c${data.position} cmsg\">\n        <img class=\"headIcon ${data.diamond ? '' : 'radius'}\" src=\"${data.headIcon}\" ondragstart=\"return false;\" oncontextmenu=\"return false;\"/>\n        <span class=\"name\">\n            ${renderTitleHtml(data.htitle, TitleType[data.htitleType] || '')}\n            <span>${escapeHtml(data.name) || '&nbsp;'}</span>\n        </span>\n        <span class=\"content\">${data.messageType === 'raw' ? data.html : escapeHtml(data.html)}</span>\n    </div>`;\n}\n\nfunction renderTitleHtml(content, css) {\n    if (!content) return '';\n    return `<span class=\"htitle ${css}\" style=\"margin: 0 4px 0 0;\">${content}</span>`;\n}\n\nfunction renderTipHtml(content, css) {\n    if (!content) return '';\n    return `<div class=\"tips\"><span class=\"${css}\" style=\"margin-bottom: 20px;\">${escapeHtml(content)}</span></div>`;\n}\n\n// 转义 C0 Controls and Basic Latin 中非数字和字母，C1 Controls and Latin-1 Supplement 全部\n// https://www.w3schools.com/charsets/ref_html_utf8.asp\nfunction escapeHtml(unsafe) {\n    return unsafe?.replace(\n        /[\\u0000-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u00FF]/g,\n        c => '&#' + ('000' + c.charCodeAt(0)).slice(-4) + ';'\n    )\n}\n"]}